(()=>{"use strict";var e={};(e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})})(e);const l=window.wp.i18n,i=window.wp.blocks,a=window.wp.blockEditor,o=window.wp.components,c=window.React;var n,t;function s(){return s=Object.assign?Object.assign.bind():function(e){for(var l=1;l<arguments.length;l++){var i=arguments[l];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},s.apply(null,arguments)}var r=function(e){return c.createElement("svg",s({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 25 26"},e),n||(n=c.createElement("path",{d:"M3.1 3.9V10H1.8V3.9zM3.3 2c0 .1 0 .2-.1.3 0 .1-.1.2-.2.3 0 .1-.1.2-.2.2s-.2.1-.3.1-.2 0-.3-.1c-.2 0-.2-.1-.3-.2-.1 0-.2-.1-.2-.2s-.1-.2-.1-.3 0-.2.1-.3c0-.1.1-.2.2-.3.1-.2.1-.2.2-.3.1 0 .2-.1.3-.1s.2 0 .3.1c.1 0 .2.1.3.2s.1.2.2.3.1.2.1.3m1.9 8V4.9l-.6-.1c-.1 0-.2-.1-.2-.1-.1 0-.2-.1-.2-.2V4h.9v-.6c0-.3 0-.7.1-.9.2-.3.4-.5.6-.7s.4-.3.7-.4c.2-.1.5-.2.9-.2h.4c.1 0 .3 0 .4.1v.6c0 .1-.1.2-.2.2h-.4c-.2 0-.3 0-.5.1-.1.1-.3.2-.4.3s-.2.2-.2.4c-.1.1-.1.3-.1.6V4h1.7v.9H6.5V10zM13.8 17.8c.6.2 1.3.4 2.1.4v-1.3c-.5 0-.9-.1-1.2-.2s-.5-.3-.7-.5l-1.1 1.1c.2.2.5.4.9.5M12.5 2.1c-.3.5-.5 1-.5 1.7v3c0 .5-.1.8-.3 1.1s-.5.5-.8.6c-.4.1-.8.2-1.3.2V10c.5 0 1 .1 1.3.2.4.1.6.3.8.6s.3.7.3 1.1v1.2h.9c.3 0 .5.1.7.2v-1.5c0-.7-.2-1.2-.5-1.6s-.9-.7-1.6-.8c.7-.1 1.2-.4 1.6-.8.3-.4.5-1 .5-1.6V4c0-.4.1-.8.3-1.1s.4-.5.8-.6c.3-.1.8-.2 1.2-.2V.7c-.8 0-1.5.1-2 .3-.7.3-1.1.6-1.4 1.1M23.1 8.6c-.4-.1-.6-.3-.8-.6q-.3-.45-.3-1.2v-3c0-.7-.2-1.3-.5-1.7-.3-.5-.7-.8-1.3-1S18.9.8 18.1.7V2c.5 0 .9.1 1.2.2s.6.3.8.6.3.6.3 1.1v3c0 .7.2 1.2.5 1.6s.9.7 1.6.8v.1c-.7.1-1.2.4-1.6.8-.3.4-.5 1-.5 1.6v3c0 .4-.1.8-.3 1.1s-.4.5-.8.6c-.3.1-.7.2-1.2.2V18c.8 0 1.5-.1 2-.4.6-.2 1-.6 1.4-1 .3-.5.5-1 .5-1.7v-3c0-.5.1-.8.3-1.1s.5-.5.8-.6c.4-.1.8-.2 1.3-.2V8.8c-.5 0-.9-.1-1.3-.2"})),c.createElement("path",{d:"m13.8 16 .1.1.1-.1c.8-.8.4-2.1-.5-2.6v1.5c.1.5.2.8.3 1.1",style:{fill:"#fff"}}),t||(t=c.createElement("path",{d:"M12.9 14.8H9.6s-.1 0-.1.1l-.2.7c0 .1 0 .2.1.2h1.3c.1 0 .1.1.1.2l-2 2.2 1 3.4c0 .1 0 .1-.1.1h-1c-.1 0-.1 0-.1-.1L8 19.8c0-.1-.2-.1-.2 0L7.4 21v.1l.4 1.5.1.1h3.3c.1 0 .1-.1.1-.1L10 18.3v-.1l3-3.2c0-.1 0-.2-.1-.2"})),c.createElement("path",{d:"M9 13H7s-.1 0-.1.1l-.3.7c0 .1 0 .2.1.2h.8c.1 0 .1.1.1.2l-2.4 6.7c0 .1-.2.1-.2 0L3.4 16c0-.1 0-.2.1-.2h.9s.1 0 .1.1l.6 1.7c0 .1.2.1.2 0l1-2.7c0-.1 0-.2-.1-.2H2.1c-.1.1-.1.2-.1.2l3.1 9c0 .1.2.1.2 0l3.8-10.8s0-.1-.1-.1",style:{fill:"#d8141c"}}))};const d=()=>!(void 0!==window.wpVersion&&null!==window.wpVersion&&(0,e.default)(window.wpVersion,"6.3")<0),_={from:[{type:"block",isMultiBlock:!0,blocks:["*"],__experimentalConvert(e){const l=e.map((e=>(0,i.createBlock)(e.name,e.attributes,e.innerBlocks)));return(0,i.createBlock)("vk-blocks/dynamic-if",{},l)}}],ungroup:d()?(e,l)=>l:void 0,to:d()?void 0:[{type:"block",blocks:["*"],transform:(e,l)=>l}]},u=window.ReactJSXRuntime;(0,i.registerBlockType)("vk-blocks/dynamic-if",{apiVersion:3,title:(0,l.__)("Dynamic If","vk-dynamic-if-block"),icon:(0,u.jsx)(r,{}),transforms:_,category:"theme",attributes:{ifPageType:{type:"string",default:"none"},ifPostType:{type:"string",default:"none"},ifLanguage:{type:"string",default:"none"},userRole:{type:"array",default:[]},customFieldName:{type:"string",default:""},customFieldRule:{type:"string",default:""},customFieldValue:{type:"string",default:""},exclusion:{type:"boolian",default:!1},periodDisplaySetting:{type:"string",default:"none"},periodSpecificationMethod:{type:"string",default:"direct"},periodDisplayValue:{type:"string",default:""},periodReferCustomField:{type:"string",default:""},showOnlyLoginUser:{type:"boolean",default:!1}},supports:{html:!1,innerBlocks:!0},edit({attributes:e,setAttributes:i}){const{ifPageType:c,ifPostType:n,ifLanguage:t,userRole:s,customFieldName:r,customFieldRule:d,customFieldValue:_,exclusion:v,periodDisplaySetting:f,periodSpecificationMethod:m,periodDisplayValue:y,periodReferCustomField:k,showOnlyLoginUser:b}=e,p=[{value:"none",label:(0,l.__)("No restriction","vk-dynamic-if-block")},{value:"is_front_page",label:(0,l.__)("Front Page","vk-dynamic-if-block")+" ( is_front_page() )"},{value:"is_single",label:(0,l.__)("Single","vk-dynamic-if-block")+" ( is_single() )"},{value:"is_page",label:(0,l.__)("Page","vk-dynamic-if-block")+" ( is_page() )"},{value:"is_singular",label:(0,l.__)("Singular","vk-dynamic-if-block")+" ( is_singular() )"},{value:"is_home",label:(0,l.__)("Post Top","vk-dynamic-if-block")+" ( is_home() && ! is_front_page() )"},{value:"is_post_type_archive",label:(0,l.__)("Post Type Archive","vk-dynamic-if-block")+" ( is_post_type_archive() )"},{value:"is_category",label:(0,l.__)("Category Archive","vk-dynamic-if-block")+" ( is_category() )"},{value:"is_tag",label:(0,l.__)("Tag Archive","vk-dynamic-if-block")+" ( is_tag() )"},{value:"is_tax",label:(0,l.__)("Taxonomy Archive","vk-dynamic-if-block")+" ( is_tax() )"},{value:"is_year",label:(0,l.__)("Yearly Archive","vk-dynamic-if-block")+" ( is_year() )"},{value:"is_month",label:(0,l.__)("Monthly Archive","vk-dynamic-if-block")+" ( is_month() )"},{value:"is_date",label:(0,l.__)("Daily Archive","vk-dynamic-if-block")+" ( is_date() )"},{value:"is_author",label:(0,l.__)("Author Archive","vk-dynamic-if-block")+" ( is_author() )"},{value:"is_archive",label:(0,l.__)("Archive","vk-dynamic-if-block")+" ( is_archive() )"},{value:"is_search",label:(0,l.__)("Search Result","vk-dynamic-if-block")+" ( is_search() )"},{value:"is_404",label:(0,l.__)("404","vk-dynamic-if-block")+" ( is_404() )"}],h=`vk-dynamic-if-block ifPageType-${c} ifPostType-${n}`,g=vk_dynamic_if_block_localize_data.userRoles||{},x=Object.keys(g).map((e=>({value:e,label:(0,l.__)(g[e],"vk-dynamic-if-block")})));let C=[];"none"!==c&&C.push(c),"none"!==t&&C.push(t),"none"!==n&&C.push(n),s.length>0&&s.forEach((e=>{const l=x.find((l=>l.value===e));l&&C.push(l.label)})),r&&C.push(r),"none"!==f&&C.push(f),b&&C.push("showOnlyLoginUser");let w=C.join(" / ");return v&&C.length>0&&(w="! "+w),(0,u.jsxs)("div",{...(0,a.useBlockProps)({className:h}),children:[(0,u.jsx)(a.InspectorControls,{children:(0,u.jsxs)(o.PanelBody,{title:(0,l.__)("Display Conditions","vk-dynamic-if-block"),className:"vkdif",children:[(0,u.jsx)(o.SelectControl,{label:(0,l.__)("Page Type","vk-dynamic-if-block"),value:c,options:p,onChange:e=>i({ifPageType:e})}),(0,u.jsx)(o.SelectControl,{label:(0,l.__)("Post Type","vk-dynamic-if-block"),value:n,options:vk_dynamic_if_block_localize_data.postTypeSelectOptions,onChange:e=>i({ifPostType:e})}),(0,u.jsx)(o.SelectControl,{label:(0,l.__)("Languages","vk-dynamic-if-block"),value:t,options:vk_dynamic_if_block_localize_data.languageSelectOptions,onChange:e=>i({ifLanguage:e})}),(0,u.jsx)(o.BaseControl,{__nextHasNoMarginBottom:!0,className:"dynamic-if-user-role",label:(0,l.__)("User Role","vk-dynamic-if-block"),help:(0,l.__)("If unchecked, no restrictions are imposed by user role","vk-dynamic-if-block"),children:x.map(((e,l)=>(0,u.jsx)(o.CheckboxControl,{__nextHasNoMarginBottom:!0,label:e.label,checked:s.includes(e.value),onChange:l=>{i(l?{userRole:[...s,e.value]}:{userRole:s.filter((l=>l!==e.value))})}},l)))}),(0,u.jsx)(o.ToggleControl,{label:(0,l.__)("Displayed only for logged-in users.","vk-dynamic-if-block"),checked:b,onChange:e=>i({showOnlyLoginUser:e})}),(0,u.jsx)(o.TextControl,{label:(0,l.__)("Custom Field Name","vk-dynamic-if-block"),value:r,onChange:e=>i({customFieldName:e})}),r&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.SelectControl,{label:(0,l.__)("Custom Field Rule","vk-dynamic-if-block"),value:d,options:[{value:"valueExists",label:(0,l.__)("Value Exist ( !empty() )","vk-dynamic-if-block")},{value:"valueEquals",label:(0,l.__)("Value Equals ( === )","vk-dynamic-if-block")}],onChange:e=>i({customFieldRule:e})}),"valueEquals"===d&&(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(o.TextControl,{label:(0,l.__)("Custom Field Value","vk-dynamic-if-block"),value:_,onChange:e=>i({customFieldValue:e})})})]}),(0,u.jsxs)(o.BaseControl,{title:(0,l.__)("Display Period","vk-dynamic-if-block"),children:[(0,u.jsx)(o.SelectControl,{label:(0,l.__)("Display Period Setting","vk-dynamic-if-block"),value:f,options:[{value:"none",label:(0,l.__)("No restriction","vk-dynamic-if-block")},{value:"deadline",label:(0,l.__)("Set to display deadline","vk-dynamic-if-block")},{value:"startline",label:(0,l.__)("Set to display startline","vk-dynamic-if-block")},{value:"daysSincePublic",label:(0,l.__)("Number of days from the date of publication","vk-dynamic-if-block")}],onChange:e=>i({periodDisplaySetting:e}),help:"deadline"===f?(0,l.__)("After the specified date, it is hidden.","vk-dynamic-if-block"):"startline"===f?(0,l.__)("After the specified date, it is display.","vk-dynamic-if-block"):"daysSincePublic"===f?(0,l.__)("After the specified number of days, it is hidden.","vk-dynamic-if-block"):(0,l.__)("You can set the deadline or startline to be displayed, as well as the time period.","vk-dynamic-if-block")}),"none"!==f&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.SelectControl,{label:(0,l.__)("Period specification method","vk-dynamic-if-block"),value:m,options:[{value:"direct",label:(0,l.__)("Direct input in this block","vk-dynamic-if-block")},{value:"referCustomField",label:(0,l.__)("Refer to value of custom field","vk-dynamic-if-block")}],onChange:e=>i({periodSpecificationMethod:e})}),"direct"===m&&(0,u.jsx)(o.__experimentalNumberControl,{label:(0,l.__)("Value for the specified period","vk-dynamic-if-block"),type:"daysSincePublic"===f?"number":"datetime-local",step:"daysSincePublic"===f?1:60,value:y,onChange:e=>i({periodDisplayValue:e})}),"referCustomField"===m&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(o.TextControl,{label:(0,l.__)("Referenced custom field name","vk-dynamic-if-block"),value:k,onChange:e=>i({periodReferCustomField:e}),help:"daysSincePublic"===f?(0,l.__)("Save the value of the custom field as an integer.","vk-dynamic-if-block"):(0,l.__)("Save the custom field values as Y-m-d H:i:s.","vk-dynamic-if-block"),className:"vkdif__refer-cf-name"}),!k&&(0,u.jsx)("div",{className:"vkdif__alert vkdif__alert-warning",children:(0,l.__)("Enter the name of the custom field you wish to reference.","vk-dynamic-if-block")})]})]})]}),(0,u.jsx)(o.ToggleControl,{label:(0,l.__)("Exclusion designation","vk-dynamic-if-block"),checked:v,onChange:e=>i({exclusion:e})})]})}),(0,u.jsx)("div",{className:"vk-dynamic-if-block__label",children:w}),(0,u.jsx)(a.InnerBlocks,{template:[["core/paragraph",{}]]})]})},save:()=>(0,u.jsx)(a.InnerBlocks.Content,{})})})();