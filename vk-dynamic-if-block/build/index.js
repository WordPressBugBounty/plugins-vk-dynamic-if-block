(()=>{"use strict";const e=window.wp.i18n,o=window.wp.blocks,i=window.wp.blockEditor,n=window.wp.element,t=window.wp.components,l=window.React;var a,s;function c(){return c=Object.assign?Object.assign.bind():function(e){for(var o=1;o<arguments.length;o++){var i=arguments[o];for(var n in i)({}).hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},c.apply(null,arguments)}var r=function(e){return l.createElement("svg",c({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 25 26"},e),a||(a=l.createElement("path",{d:"M3.1 3.9V10H1.8V3.9zM3.3 2c0 .1 0 .2-.1.3 0 .1-.1.2-.2.3 0 .1-.1.2-.2.2s-.2.1-.3.1-.2 0-.3-.1c-.2 0-.2-.1-.3-.2-.1 0-.2-.1-.2-.2s-.1-.2-.1-.3 0-.2.1-.3c0-.1.1-.2.2-.3.1-.2.1-.2.2-.3.1 0 .2-.1.3-.1s.2 0 .3.1c.1 0 .2.1.3.2s.1.2.2.3.1.2.1.3m1.9 8V4.9l-.6-.1c-.1 0-.2-.1-.2-.1-.1 0-.2-.1-.2-.2V4h.9v-.6c0-.3 0-.7.1-.9.2-.3.4-.5.6-.7s.4-.3.7-.4c.2-.1.5-.2.9-.2h.4c.1 0 .3 0 .4.1v.6c0 .1-.1.2-.2.2h-.4c-.2 0-.3 0-.5.1-.1.1-.3.2-.4.3s-.2.2-.2.4c-.1.1-.1.3-.1.6V4h1.7v.9H6.5V10zM13.8 17.8c.6.2 1.3.4 2.1.4v-1.3c-.5 0-.9-.1-1.2-.2s-.5-.3-.7-.5l-1.1 1.1c.2.2.5.4.9.5M12.5 2.1c-.3.5-.5 1-.5 1.7v3c0 .5-.1.8-.3 1.1s-.5.5-.8.6c-.4.1-.8.2-1.3.2V10c.5 0 1 .1 1.3.2.4.1.6.3.8.6s.3.7.3 1.1v1.2h.9c.3 0 .5.1.7.2v-1.5c0-.7-.2-1.2-.5-1.6s-.9-.7-1.6-.8c.7-.1 1.2-.4 1.6-.8.3-.4.5-1 .5-1.6V4c0-.4.1-.8.3-1.1s.4-.5.8-.6c.3-.1.8-.2 1.2-.2V.7c-.8 0-1.5.1-2 .3-.7.3-1.1.6-1.4 1.1M23.1 8.6c-.4-.1-.6-.3-.8-.6q-.3-.45-.3-1.2v-3c0-.7-.2-1.3-.5-1.7-.3-.5-.7-.8-1.3-1S18.9.8 18.1.7V2c.5 0 .9.1 1.2.2s.6.3.8.6.3.6.3 1.1v3c0 .7.2 1.2.5 1.6s.9.7 1.6.8v.1c-.7.1-1.2.4-1.6.8-.3.4-.5 1-.5 1.6v3c0 .4-.1.8-.3 1.1s-.4.5-.8.6c-.3.1-.7.2-1.2.2V18c.8 0 1.5-.1 2-.4.6-.2 1-.6 1.4-1 .3-.5.5-1 .5-1.7v-3c0-.5.1-.8.3-1.1s.5-.5.8-.6c.4-.1.8-.2 1.3-.2V8.8c-.5 0-.9-.1-1.3-.2"})),l.createElement("path",{d:"m13.8 16 .1.1.1-.1c.8-.8.4-2.1-.5-2.6v1.5c.1.5.2.8.3 1.1",style:{fill:"#fff"}}),s||(s=l.createElement("path",{d:"M12.9 14.8H9.6s-.1 0-.1.1l-.2.7c0 .1 0 .2.1.2h1.3c.1 0 .1.1.1.2l-2 2.2 1 3.4c0 .1 0 .1-.1.1h-1c-.1 0-.1 0-.1-.1L8 19.8c0-.1-.2-.1-.2 0L7.4 21v.1l.4 1.5.1.1h3.3c.1 0 .1-.1.1-.1L10 18.3v-.1l3-3.2c0-.1 0-.2-.1-.2"})),l.createElement("path",{d:"M9 13H7s-.1 0-.1.1l-.3.7c0 .1 0 .2.1.2h.8c.1 0 .1.1.1.2l-2.4 6.7c0 .1-.2.1-.2 0L3.4 16c0-.1 0-.2.1-.2h.9s.1 0 .1.1l.6 1.7c0 .1.2.1.2 0l1-2.7c0-.1 0-.2-.1-.2H2.1c-.1.1-.1.2-.1.2l3.1 9c0 .1.2.1.2 0l3.8-10.8s0-.1-.1-.1",style:{fill:"#d8141c"}}))};const d=/^[v^~<>=]*?(\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+)(?:\.([x*]|\d+))?(?:-([\da-z\-]+(?:\.[\da-z\-]+)*))?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i,u=e=>{if("string"!=typeof e)throw new TypeError("Invalid argument expected string");const o=e.match(d);if(!o)throw new Error(`Invalid argument not valid semver ('${e}' received)`);return o.shift(),o},p=e=>"*"===e||"x"===e||"X"===e,y=e=>{const o=parseInt(e,10);return isNaN(o)?e:o},m=(e,o)=>{if(p(e)||p(o))return 0;const[i,n]=((e,o)=>typeof e!=typeof o?[String(e),String(o)]:[e,o])(y(e),y(o));return i>n?1:i<n?-1:0},f=(e,o)=>{for(let i=0;i<Math.max(e.length,o.length);i++){const n=m(e[i]||"0",o[i]||"0");if(0!==n)return n}return 0},v={pageType:"Page Type",postType:"Post Type",taxonomy:"Taxonomy",language:"Language",userRole:"User Role",postAuthor:"Post Author",customField:"Custom Field",period:"Display Period",loginUser:"Login User Only",mobileDevice:"Mobile Device Only"},g=[{value:"none",label:"No restriction"},{value:"is_front_page",label:"Front Page",func:"is_front_page()"},{value:"is_single",label:"Single",func:"is_single()"},{value:"is_page",label:"Page",func:"is_page()"},{value:"is_singular",label:"Singular",func:"is_singular()"},{value:"is_home",label:"Post Top",func:"is_home() && ! is_front_page()"},{value:"is_post_type_archive",label:"Post Type Archive",func:"is_post_type_archive() && !is_year() && !is_month() && !is_date()"},{value:"is_category",label:"Category Archive",func:"is_category()"},{value:"is_tag",label:"Tag Archive",func:"is_tag()"},{value:"is_tax",label:"Taxonomy Archive",func:"is_tax()"},{value:"is_year",label:"Yearly Archive",func:"is_year()"},{value:"is_month",label:"Monthly Archive",func:"is_month()"},{value:"is_date",label:"Daily Archive",func:"is_date()"},{value:"is_author",label:"Author Archive",func:"is_author()"},{value:"is_archive",label:"Archive",func:"is_archive()"},{value:"is_search",label:"Search Result",func:"is_search()"},{value:"is_404",label:"404",func:"is_404()"}],h=[{value:"valueExists",label:(0,e.__)("Value Exist ( !empty() )","vk-dynamic-if-block")},{value:"valueEquals",label:(0,e.__)("Value Equals ( === )","vk-dynamic-if-block")}],_=[{value:"none",label:(0,e.__)("No restriction","vk-dynamic-if-block")},{value:"deadline",label:(0,e.__)("Set to display deadline","vk-dynamic-if-block")},{value:"startline",label:(0,e.__)("Set to display startline","vk-dynamic-if-block")},{value:"daysSincePublic",label:(0,e.__)("Number of days from the date of publication","vk-dynamic-if-block")}],k=[{value:"direct",label:(0,e.__)("Direct input in this block","vk-dynamic-if-block")},{value:"referCustomField",label:(0,e.__)("Refer to value of custom field","vk-dynamic-if-block")}],b=[{value:"none",label:(0,e.__)("No restriction","vk-dynamic-if-block")},{value:"has_parent",label:(0,e.__)("Has parent page","vk-dynamic-if-block")},{value:"has_children",label:(0,e.__)("Has child pages","vk-dynamic-if-block")}],x=[{label:"AND",value:"and"},{label:"OR",value:"or"}],C={className:"vk-dynamic-if-block",defaultTemplate:[["core/paragraph",{}]],defaultConditionType:"pageType",defaultOperator:"and"},T=()=>"vkdif_"+Math.random().toString(36).substr(2,15)+"_"+Date.now().toString(36),S=(e,o)=>({id:T(),conditions:[{id:T(),type:e,values:o}],operator:C.defaultOperator}),D=()=>!(void 0!==window.wpVersion&&null!==window.wpVersion&&(e=>{const o=u(e),i=u("6.3"),n=o.pop(),t=i.pop(),l=f(o,i);return 0!==l?l:n&&t?f(n.split("."),t.split(".")):n||t?n?-1:1:0})(window.wpVersion)<0),j={from:[{type:"block",isMultiBlock:!0,blocks:["*"],__experimentalConvert(e){const i=e.map((e=>(0,o.createBlock)(e.name,e.attributes,e.innerBlocks))),n={conditions:[{id:T(),name:"Condition 1",conditions:[],operator:"and"}]};return(0,o.createBlock)("vk-blocks/dynamic-if",n,i)}}],ungroup:D()?(e,o)=>o:void 0,to:D()?void 0:[{type:"block",blocks:["*"],transform:(e,o)=>o}]},w=window.ReactJSXRuntime;(0,o.registerBlockType)("vk-blocks/dynamic-if",{apiVersion:3,title:(0,e.__)("Dynamic If","vk-dynamic-if-block"),icon:(0,w.jsx)(r,{}),transforms:j,category:"theme",attributes:{conditions:{type:"array",default:[{id:"",name:"Condition 1",conditions:[],operator:"and"}]},conditionOperator:{type:"string",default:"and"},exclusion:{type:"boolean",default:!1},ifPageType:{type:"string",default:"none"},ifPostType:{type:"string",default:"none"},ifLanguage:{type:"string",default:"none"},userRole:{type:"array",default:[]},postAuthor:{type:"number",default:0},customFieldName:{type:"string",default:""},customFieldRule:{type:"string",default:"valueExists"},customFieldValue:{type:"string",default:""},periodDisplaySetting:{type:"string",default:"none"},periodSpecificationMethod:{type:"string",default:"direct"},periodDisplayValue:{type:"string",default:""},periodReferCustomField:{type:"string",default:""},showOnlyLoginUser:{type:"boolean",default:!1}},supports:{html:!1,innerBlocks:!0},edit:function({attributes:o,setAttributes:l}){const{conditions:a,conditionOperator:s,exclusion:c}=o,r=(e,o,i)=>{const n=[...a];n[e]={...n[e],conditions:[...n[e].conditions]};const t=i(n[e].conditions[o]);n[e].conditions[o]=t,l({conditions:n})};(0,n.useEffect)((()=>{if(a&&a.length>0&&a.some((e=>!e.id||e.conditions&&e.conditions.some((e=>!e.id))))){const e=a.map((e=>({...e,id:e.id||T(),conditions:e.conditions?e.conditions.map((e=>({...e,id:e.id||T()}))):[]})));l({conditions:e})}}),[a,l]);const[d,u]=(0,n.useState)(!1);(0,n.useEffect)((()=>{if(d)return;if(a&&a.length>0&&a[0]&&a[0].conditions.length>0)return void u(!0);const e=["ifPageType","ifPostType","ifLanguage","userRole","postAuthor","customFieldName","customFieldRule","customFieldValue","periodDisplaySetting","periodSpecificationMethod","periodDisplayValue","periodReferCustomField","showOnlyLoginUser"];if(!e.some((e=>{const i=o[e];return"userRole"===e?Array.isArray(i)&&i.length>0:"postAuthor"===e?0!==i:"showOnlyLoginUser"===e?!0===i:i&&"none"!==i&&""!==i})))return void u(!0);const i=[],n=(e=>[{attr:"ifPageType",type:"pageType",key:"ifPageType",condition:e=>e&&"none"!==e},{attr:"ifPostType",type:"postType",key:"ifPostType",condition:e=>e&&"none"!==e},{attr:"ifLanguage",type:"language",key:"ifLanguage",condition:e=>e&&"none"!==e},{attr:"userRole",type:"userRole",key:"userRole",condition:e=>e&&e.length>0},{attr:"postAuthor",type:"postAuthor",key:"postAuthor",condition:e=>e&&e>0},{attr:"customFieldName",type:"customField",key:null,condition:e=>e,customValues:()=>({customFieldName:e.customFieldName,...e.customFieldRule?{customFieldRule:e.customFieldRule}:{},...e.customFieldValue?{customFieldValue:e.customFieldValue}:{}})},{attr:"periodDisplaySetting",type:"period",key:null,condition:e=>e&&"none"!==e,customValues:()=>({periodDisplaySetting:e.periodDisplaySetting,...e.periodSpecificationMethod?{periodSpecificationMethod:e.periodSpecificationMethod}:{},...e.periodDisplayValue?{periodDisplayValue:e.periodDisplayValue}:{},...e.periodReferCustomField?{periodReferCustomField:e.periodReferCustomField}:{}})},{attr:"showOnlyLoginUser",type:"loginUser",key:"showOnlyLoginUser",condition:e=>e},{attr:"showOnlyMobileDevice",type:"mobileDevice",key:"showOnlyMobileDevice",condition:e=>e}])(o);n.forEach((e=>{const n=o[e.attr];if(e.condition(n)){const o=e.customValues?e.customValues():{[e.key]:Array.isArray(n)?n[0]||"":n};i.push(S(e.type,o))}})),0===i.length&&i.push(S("pageType",{ifPageType:"none"}));const t={conditions:i};e.forEach((e=>{let o="none";"userRole"===e?o=[]:"postAuthor"===e?o=0:"showOnlyLoginUser"===e?o=!1:"customFieldRule"===e?o="valueExists":"periodSpecificationMethod"===e&&(o="direct"),t[e]=o})),l(t),u(!0)}),[d]),(0,n.useEffect)((()=>{if(d&&a&&a.length>0&&a[0]&&a[0].conditions.length>0){const e=["ifPageType","ifPostType","ifLanguage","userRole","postAuthor","customFieldName","customFieldRule","customFieldValue","periodDisplaySetting","periodSpecificationMethod","periodDisplayValue","periodReferCustomField","showOnlyLoginUser","showOnlyMobileDevice"];if(e.some((e=>{const i=o[e];return"userRole"===e?Array.isArray(i)&&i.length>0:"postAuthor"===e?0!==i:"showOnlyLoginUser"===e?!0===i:i&&"none"!==i&&""!==i}))){const o={};e.forEach((e=>{let i="none";"userRole"===e?i=[]:"postAuthor"===e?i=0:"showOnlyLoginUser"===e?i=!1:"customFieldRule"===e?i="valueExists":"periodSpecificationMethod"===e&&(i="direct"),o[e]=i})),l(o)}}}),[d,a]);const p=Object.entries(v).map((([o,i])=>({value:o,label:(0,e.__)(i,"vk-dynamic-if-block")}))),y=g.map((o=>{const i=(0,e.__)(o.label,"vk-dynamic-if-block");return{value:o.value,label:o.func?`${i} ( ${o.func} )`:i,simpleLabel:i}})),m=(0,n.useMemo)((()=>{try{return Object.entries(vkDynamicIfBlockLocalizeData?.userRoles||{}).map((([o,i])=>({value:o,label:(0,e.__)(i,"vk-dynamic-if-block")})))}catch(e){return[]}}),[]),f=(0,n.useMemo)((()=>vkDynamicIfBlockLocalizeData?.userSelectOptions||[]),[]),D=(o={},i=0,n=0)=>{const{type:l="",values:s={}}=o,c=(e,o)=>((e,o,i,n)=>{!Array.isArray(a)||e<0||o<0||r(e,o,(e=>({...e,values:{...e.values,[i]:n}})))})(i,n,e,o),d=()=>(0,w.jsx)(t.SelectControl,{label:(0,e.__)("Page Hierarchy","vk-dynamic-if-block"),value:s.pageHierarchyType||"none",options:b,onChange:e=>c("pageHierarchyType",e)}),u={pageType:()=>(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(t.SelectControl,{label:(0,e.__)("Page Type","vk-dynamic-if-block"),value:s.ifPageType||"none",options:y,onChange:e=>c("ifPageType",e)}),"is_page"===s.ifPageType&&d()]}),postType:()=>(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(t.SelectControl,{label:(0,e.__)("Post Type","vk-dynamic-if-block"),value:s.ifPostType||"none",options:vkDynamicIfBlockLocalizeData?.postTypeSelectOptions||[],onChange:e=>c("ifPostType",e)}),"page"===s.ifPostType&&d()]}),language:()=>{const e=((e=[],o="")=>[...e].sort(((e,i)=>""===e.value?-1:""===i.value?1:e.value===o?-1:i.value===o?1:"en_US"===e.value?-1:"en_US"===i.value?1:e.label.localeCompare(i.label))))(vkDynamicIfBlockLocalizeData?.languageSelectOptions||[],vkDynamicIfBlockLocalizeData?.currentSiteLanguage||"");return(0,w.jsx)(t.SelectControl,{label:_x("Language","Select a language","vk-dynamic-if-block"),value:s.ifLanguage||"",options:e,onChange:e=>c("ifLanguage",e)})},userRole:()=>{try{if(!s)return(0,w.jsx)(t.BaseControl,{__nextHasNoMarginBottom:!0,className:"dynamic-if-user-role",children:(0,w.jsx)("p",{children:(0,e.__)("No values available","vk-dynamic-if-block")})});const o=Array.isArray(m)?m:[];let i=[];return Array.isArray(s.userRole)?i=s.userRole:s.userRole&&(i=[s.userRole]),0===o.length?(0,w.jsx)(t.BaseControl,{__nextHasNoMarginBottom:!0,className:"dynamic-if-user-role",children:(0,w.jsx)("p",{children:(0,e.__)("No user roles available","vk-dynamic-if-block")})}):(0,w.jsx)(t.BaseControl,{__nextHasNoMarginBottom:!0,className:"dynamic-if-user-role",children:o.map(((e,o)=>e&&e.value?e.value&&"string"==typeof e.value?(0,w.jsx)(t.CheckboxControl,{__nextHasNoMarginBottom:!0,label:e.label||"",checked:i.includes(e.value),onChange:o=>{const n=o?[...i,e.value]:i.filter((o=>o!==e.value));c("userRole",n)}},e.value||o):(0,w.jsx)("div",{},`invalid-${o}`):(0,w.jsx)("div",{},`empty-${o}`)))})}catch(o){return(0,w.jsx)(t.BaseControl,{__nextHasNoMarginBottom:!0,className:"dynamic-if-user-role",children:(0,w.jsx)("p",{children:(0,e.__)("Error loading user roles","vk-dynamic-if-block")})})}},postAuthor:()=>(0,w.jsx)(t.SelectControl,{label:(0,e.__)("Post Author","vk-dynamic-if-block"),value:s.postAuthor||0,options:f,onChange:e=>c("postAuthor",parseInt(e)||0)}),customField:()=>(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(t.TextControl,{label:(0,e.__)("Custom Field Name","vk-dynamic-if-block"),value:s.customFieldName||"",onChange:e=>c("customFieldName",e)}),s.customFieldName&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(t.SelectControl,{label:(0,e.__)("Custom Field Rule","vk-dynamic-if-block"),value:s.customFieldRule||"",options:h,onChange:e=>c("customFieldRule",e)}),"valueEquals"===s.customFieldRule&&(0,w.jsx)(t.TextControl,{label:(0,e.__)("Custom Field Value","vk-dynamic-if-block"),value:s.customFieldValue||"",onChange:e=>c("customFieldValue",e)})]})]}),period:()=>(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(t.SelectControl,{label:(0,e.__)("Display Period Setting","vk-dynamic-if-block"),value:s.periodDisplaySetting||"none",options:_,onChange:e=>c("periodDisplaySetting",e)}),s.periodDisplaySetting&&"none"!==s.periodDisplaySetting&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(t.SelectControl,{label:(0,e.__)("Period specification method","vk-dynamic-if-block"),value:s.periodSpecificationMethod||"direct",options:k,onChange:e=>c("periodSpecificationMethod",e)}),"direct"===s.periodSpecificationMethod&&(0,w.jsx)(t.TextControl,{label:(0,e.__)("Value for the specified period","vk-dynamic-if-block"),type:"daysSincePublic"===s.periodDisplaySetting?"number":"datetime-local",step:"daysSincePublic"===s.periodDisplaySetting?1:60,value:s.periodDisplayValue||"",onChange:e=>c("periodDisplayValue",e)}),"referCustomField"===s.periodSpecificationMethod&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(t.TextControl,{label:(0,e.__)("Referenced custom field name","vk-dynamic-if-block"),value:s.periodReferCustomField||"",onChange:e=>c("periodReferCustomField",e)}),!s.periodReferCustomField&&(0,w.jsx)("div",{className:"vkdif__alert vkdif__alert-warning",children:(0,e.__)("Enter the name of the custom field you wish to reference.","vk-dynamic-if-block")})]})]})]}),loginUser:()=>(0,w.jsx)(t.ToggleControl,{label:(0,e.__)("Displayed only for logged-in users.","vk-dynamic-if-block"),checked:s.showOnlyLoginUser||!1,onChange:e=>c("showOnlyLoginUser",e)}),taxonomy:()=>{const o=vkDynamicIfBlockLocalizeData?.taxonomySelectOptions||[],l=vkDynamicIfBlockLocalizeData?.termSelectOptions||{},a=s.taxonomy||"none",d=a&&"none"!==a&&l[a]||[],u=Array.isArray(s.termIds)?s.termIds:[];return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(t.SelectControl,{label:(0,e.__)("Taxonomy","vk-dynamic-if-block"),value:a,options:[{value:"none",label:(0,e.__)("No restriction","vk-dynamic-if-block")},...o],onChange:e=>{r(i,n,(o=>({...o,values:{...o.values,taxonomy:e,termIds:[]}})))}}),a&&"none"!==a&&(0,w.jsx)(t.SelectControl,{label:(0,e.__)("Select Term","vk-dynamic-if-block"),value:u[0]||"",options:[{value:"",label:(0,e.__)("No restriction","vk-dynamic-if-block")},...d],onChange:e=>{c("termIds",e?[e]:[])}})]})},mobileDevice:()=>(0,w.jsx)(t.ToggleControl,{label:(0,e.__)("Displayed only on mobile devices.","vk-dynamic-if-block"),checked:s.showOnlyMobileDevice||!1,onChange:e=>c("showOnlyMobileDevice",e)})};return u[l]?.()||null},j=(e={},o=[],i="",n=!1)=>{const t=e[i];if(!t||!Array.isArray(o))return null;const l=o.find((e=>e?.value===t));return l?.[n?"simpleLabel":"label"]||t},A=(0,n.useMemo)((()=>{try{if(!Array.isArray(a)||!a.length)return c?`${(0,e.__)("!","vk-dynamic-if-block")} ${(0,e.__)("No conditions set","vk-dynamic-if-block")}`:(0,e.__)("No conditions set","vk-dynamic-if-block");const o=a.map((o=>{const{conditions:i=[]}=o||{};if(!i.length)return null;const n=i[0];if(!n?.type)return null;const{values:t={}}=n,l={pageType:()=>{const e=j(t,y,"ifPageType",!0),o="is_page"===t.ifPageType&&t.pageHierarchyType&&"none"!==t.pageHierarchyType?j(t,b,"pageHierarchyType"):null;return o?`${e} (${o})`:e},postType:()=>{const e=j(t,vkDynamicIfBlockLocalizeData?.postTypeSelectOptions||[],"ifPostType"),o="page"===t.ifPostType&&t.pageHierarchyType&&"none"!==t.pageHierarchyType?j(t,b,"pageHierarchyType"):null;return o?`${e} (${o})`:e},language:()=>j(t,vkDynamicIfBlockLocalizeData?.languageSelectOptions||[],"ifLanguage"),userRole:()=>{try{const o=t.userRole||[];let i=[];if(Array.isArray(o)?i=o:o&&(i=[o]),!i.length)return(0,e.__)("No user roles selected","vk-dynamic-if-block");let n=[];return Array.isArray(m)&&(n=m),i.map((e=>{if(!e)return"";const o=n.find((o=>o.value===e));return o?.label||e})).filter(Boolean).join(", ")||(0,e.__)("Unknown user roles","vk-dynamic-if-block")}catch(o){return(0,e.__)("Error generating user role label","vk-dynamic-if-block")}},postAuthor:()=>j(t,f,"postAuthor"),customField:()=>t.customFieldName||null,period:()=>t.periodDisplaySetting&&"none"!==t.periodDisplaySetting?t.periodDisplaySetting:null,loginUser:()=>t.showOnlyLoginUser?(0,e.__)("Login User Only","vk-dynamic-if-block"):null,taxonomy:()=>{try{const o=t.taxonomy,i=t.termIds||[];if(!o||"none"===o)return null;const n=vkDynamicIfBlockLocalizeData?.taxonomySelectOptions||[],l=vkDynamicIfBlockLocalizeData?.termSelectOptions||{},a=n.find((e=>e.value===o))?.label||o,s=l[o]||[],c=i.map((e=>{const o=s.find((o=>o.value===parseInt(e)));return o?.label||""})).filter(Boolean).join(", ");return c?`${a}: ${c}`:`${a} (${(0,e.__)("No terms selected","vk-dynamic-if-block")})`}catch(o){return(0,e.__)("Error generating taxonomy label","vk-dynamic-if-block")}},showOnlyMobileDevice:()=>t.showOnlyMobileDevice?(0,e.__)("Mobile Device Only","vk-dynamic-if-block"):null};return l[n.type]?.()||n.type||null})).filter(Boolean);if(!o.length)return c?`${(0,e.__)("!","vk-dynamic-if-block")} ${(0,e.__)("No conditions set","vk-dynamic-if-block")}`:(0,e.__)("No conditions set","vk-dynamic-if-block");const i=o.join(` ${s?.toUpperCase()||"AND"} `);return c?`${(0,e.__)("!","vk-dynamic-if-block")} ${i}`:i}catch(o){return(0,e.__)("Error generating labels","vk-dynamic-if-block")}}),[a,s,c,y,m,f]);return(0,w.jsxs)("div",{...(0,i.useBlockProps)({className:C.className}),children:[(0,w.jsx)(i.InspectorControls,{children:(0,w.jsx)(t.PanelBody,{title:(0,e.__)("Display Conditions","vk-dynamic-if-block"),className:"vkdif",children:0===a.length?(0,w.jsxs)("div",{children:[(0,w.jsxs)(t.BaseControl,{__nextHasNoMarginBottom:!0,className:"dynamic-if-add-condition",children:[(0,w.jsx)("p",{children:(0,e.__)("No conditions set. Add a condition to control display.","vk-dynamic-if-block")}),(0,w.jsx)(t.Button,{variant:"primary",onClick:()=>{const e={id:T(),type:C.defaultConditionType,values:{}};if(0===a.length)l({conditions:[{id:T(),conditions:[e],operator:C.defaultOperator}]});else{const o=[...a];o[0]={...o[0],conditions:[...o[0].conditions,e]},l({conditions:o})}},children:(0,e.__)("Add Condition","vk-dynamic-if-block")})]}),(0,w.jsx)(t.ToggleControl,{label:(0,e.__)("Exclusion designation","vk-dynamic-if-block"),checked:c,onChange:e=>l({exclusion:e})})]}):(0,w.jsxs)(w.Fragment,{children:[a.map(((o,i)=>(0,w.jsxs)("div",{className:"vkdif__group",children:[(0,w.jsx)("div",{className:"vkdif__group-conditions",children:o.conditions.map(((o,n)=>{const l=p;return(0,w.jsxs)("div",{className:"vkdif__condition",children:[(0,w.jsx)("div",{className:"vkdif__condition-header",children:(0,w.jsx)(t.SelectControl,{label:(0,e.__)("Condition Type","vk-dynamic-if-block"),value:o.type,options:l,onChange:e=>((e,o,i)=>{!Array.isArray(a)||e<0||o<0||!i||r(e,o,(e=>{let o=e.values;return i.type&&i.type!==e.type&&(o="pageType"===i.type?{ifPageType:"none"}:"postType"===i.type?{ifPostType:"none"}:"userRole"===i.type?{userRole:[]}:"language"===i.type?{ifLanguage:""}:"postAuthor"===i.type?{postAuthor:0}:"taxonomy"===i.type?{taxonomy:"none",termIds:[]}:{}),{...e,...i,values:o}}))})(i,n,{type:e,values:{}})})}),(0,w.jsx)("div",{className:"vkdif__condition-settings",children:D(o,i,n)})]},o.id)}))}),(0,w.jsx)(t.Button,{variant:"secondary",isDestructive:!0,onClick:()=>{const e=[...a];e.splice(i,1),l({conditions:e})},children:(0,e.__)("Remove Condition","vk-dynamic-if-block")})]},o.id))),(0,w.jsx)(t.BaseControl,{__nextHasNoMarginBottom:!0,className:"dynamic-if-add-condition",children:(0,w.jsx)(t.Button,{variant:"secondary",onClick:()=>{const e={id:T(),conditions:[{id:T(),type:C.defaultConditionType,values:{}}],operator:"or"},o=[...a,e];l({conditions:o})},className:"vkdif__add-condition",children:(0,e.__)("Add Condition","vk-dynamic-if-block")})}),a.length>1&&(0,w.jsx)(t.SelectControl,{label:(0,e.__)("Condition Operator","vk-dynamic-if-block"),value:s,options:x,onChange:e=>l({conditionOperator:e})}),(0,w.jsx)(t.ToggleControl,{label:(0,e.__)("Exclusion designation","vk-dynamic-if-block"),checked:c,onChange:e=>l({exclusion:e})})]})})}),(0,w.jsx)("div",{className:"vk-dynamic-if-block__label",children:(0,w.jsx)("span",{children:A||(0,e.__)("No conditions set","vk-dynamic-if-block")})}),(0,w.jsx)(i.InnerBlocks,{template:C.defaultTemplate})]})},save:()=>(0,w.jsx)(i.InnerBlocks.Content,{})})})();